@using Umbraco.Extensions
@using Umbraco.Community.BlockPreview.Extensions
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<Umbraco.Cms.Core.Models.Blocks.BlockGridItem>

@{
    
    var settings = Model.Settings as ImageBlockSettings;
    var orientation = "landscape";
    if(settings.Orientation == "Portrait")
    {
        orientation = "portrait";
    }
}

@{
    @if (Context.Request.IsBlockPreviewRequest())
    {
        var typedMediaPickerSingle = Model.Content.Value<Umbraco.Cms.Core.Models.MediaWithCrops>("image");
        if (typedMediaPickerSingle != null)
        {
            <div style="padding: 0px 0px">
                <img class="border-radius-10px" src="@typedMediaPickerSingle.GetCropUrl(orientation)" style="object-fit:cover; width:100%; height:100%;"/>
            </div>
        } else {
            <div style="background-color: #f5f5f5; padding: 20px; border-radius: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center">
                <div style="color: #999; font-weight: bold; margin-bottom: 10px;">Image Block</div>
                <div style="color: #999;">- No content -</div>
            </div>
        }
    }
    else
    {
        var typedMediaPickerSingle = Model.Content.Value<Umbraco.Cms.Core.Models.MediaWithCrops>("image");
        if (typedMediaPickerSingle != null)
        {
            <div style="padding: 0px 0px">
                <img class="border-radius-10px" src="@typedMediaPickerSingle.GetCropUrl(orientation)" style="object-fit:cover; width:100%; height:100%;"/>
            </div>
        } else {
            <p>Missing image</p>
        }
    }
}
